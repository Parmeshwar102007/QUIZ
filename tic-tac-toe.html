<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tic-Tac-Toe AI</title>
    <style>
        body {
            text-align: center;
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #ff9a9e, #fad0c4);
            color: white;
            margin: 0;
            padding: 20px;
        }
        h1 {
            font-size: 36px;
            margin-bottom: 10px;
        }
        .difficulty {
            margin: 15px;
        }
        .difficulty button {
            padding: 12px 20px;
            font-size: 18px;
            border: none;
            margin: 5px;
            cursor: pointer;
            border-radius: 8px;
            transition: 0.3s;
        }
        .easy { background: #4CAF50; color: white; }
        .medium { background: #FFC107; color: black; }
        .hard { background: #F44336; color: white; }
        .difficulty button:hover { opacity: 0.8; }
        .board {
            display: grid;
            grid-template-columns: repeat(3, 120px);
            gap: 8px;
            justify-content: center;
            margin: 20px auto;
        }
        .cell {
            width: 120px;
            height: 120px;
            font-size: 36px;
            text-align: center;
            vertical-align: middle;
            background: white;
            color: black;
            border: 4px solid black;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            transition: 0.3s;
        }
        .cell.taken { cursor: not-allowed; background: #ddd; }
        .winner { background: #00C853 !important; color: white !important; font-weight: bold; }
        #status { font-size: 24px; margin: 10px; font-weight: bold; }
        .restart {
            padding: 12px 20px;
            font-size: 18px;
            border: none;
            background: #6200ea;
            color: white;
            border-radius: 8px;
            cursor: pointer;
            transition: 0.3s;
        }
        .restart:hover { background: #3700b3; }
    </style>
</head>
<body>
    <h1>Tic-Tac-Toe AI</h1>
    
    <div class="difficulty">
        <button class="easy" onclick="setDifficulty('easy')">Easy</button>
        <button class="medium" onclick="setDifficulty('medium')">Medium</button>
        <button class="hard" onclick="setDifficulty('hard')">Hard</button>
    </div>

    <div class="board" id="board"></div>
    <h2 id="status"></h2>
    <button class="restart" onclick="resetGame()">Restart Game</button>

    <script>
        let board = ["", "", "", "", "", "", "", "", ""];
        let player = "X", ai = "O";
        let gameOver = false;
        let difficulty = "medium"; // Default difficulty

        function setDifficulty(level) {
            difficulty = level;
            resetGame();
        }

        function createBoard() {
            let boardDiv = document.getElementById("board");
            boardDiv.innerHTML = "";
            board.forEach((cell, index) => {
                let cellDiv = document.createElement("div");
                cellDiv.classList.add("cell");
                cellDiv.innerText = cell;
                cellDiv.onclick = () => makeMove(index);
                boardDiv.appendChild(cellDiv);
            });
        }

        function makeMove(index) {
            if (board[index] === "" && !gameOver) {
                board[index] = player;
                checkWinner();
                if (!gameOver) {
                    setTimeout(aiMove, 500);
                }
            }
        }

        function aiMove() {
            let move;
            if (difficulty === "easy") {
                move = randomMove();
            } else if (difficulty === "medium") {
                move = bestMove() || randomMove();
            } else {
                move = bestMove();
            }
            if (move !== null) {
                board[move] = ai;
                checkWinner();
            }
            createBoard();
        }

        function randomMove() {
            let emptyCells = board.map((cell, index) => (cell === "" ? index : null)).filter(i => i !== null);
            return emptyCells.length ? emptyCells[Math.floor(Math.random() * emptyCells.length)] : null;
        }

        function bestMove() {
            let bestScore = -Infinity;
            let move = null;
            for (let i = 0; i < board.length; i++) {
                if (board[i] === "") {
                    board[i] = ai;
                    let score = minimax(board, 0, false);
                    board[i] = "";
                    if (score > bestScore) {
                        bestScore = score;
                        move = i;
                    }
                }
            }
            return move;
        }

        function minimax(board, depth, isMaximizing) {
            let result = checkWinner(true);
            if (result !== null) {
                return result === "X" ? -10 : result === "O" ? 10 : 0;
            }
            if (isMaximizing) {
                let bestScore = -Infinity;
                for (let i = 0; i < board.length; i++) {
                    if (board[i] === "") {
                        board[i] = ai;
                        let score = minimax(board, depth + 1, false);
                        board[i] = "";
                        bestScore = Math.max(score, bestScore);
                    }
                }
                return bestScore;
            } else {
                let bestScore = Infinity;
                for (let i = 0; i < board.length; i++) {
                    if (board[i] === "") {
                        board[i] = player;
                        let score = minimax(board, depth + 1, true);
                        board[i] = "";
                        bestScore = Math.min(score, bestScore);
                    }
                }
                return bestScore;
            }
        }

        function checkWinner(returnResult = false) {
            let winPatterns = [
                [0, 1, 2], [3, 4, 5], [6, 7, 8], 
                [0, 3, 6], [1, 4, 7], [2, 5, 8], 
                [0, 4, 8], [2, 4, 6]
            ];
            for (let pattern of winPatterns) {
                let [a, b, c] = pattern;
                if (board[a] && board[a] === board[b] && board[a] === board[c]) {
                    document.getElementById("status").innerText = board[a] + " Wins!";
                    gameOver = true;
                    highlightWinner(pattern);
                    return returnResult ? board[a] : null;
                }
            }
            if (!board.includes("")) {
                document.getElementById("status").innerText = "It's a Draw!";
                gameOver = true;
                return returnResult ? "draw" : null;
            }
            return returnResult ? null : createBoard();
        }

        function highlightWinner(pattern) {
            let cells = document.getElementsByClassName("cell");
            pattern.forEach(index => cells[index].classList.add("winner"));
        }

        function resetGame() {
            board = ["", "", "", "", "", "", "", "", ""];
            gameOver = false;
            document.getElementById("status").innerText = "";
            createBoard();
        }

        createBoard();
    </script>
</body>
</html>